import os
import subprocess

def convert_svgs_to_pngs(folder_path, output_folder=None, dpi=96):
    """
    Converts all .svg files in folder_path to .png files using Inkscape's command-line interface.
    
    Parameters:
      folder_path (str): Path to the folder containing SVG files.
      output_folder (str): Optional folder to save the PNG files. If None, PNGs are saved in folder_path.
      dpi (int): DPI resolution for the output PNGs.
    """
    if output_folder is None:
        output_folder = folder_path
    else:
        os.makedirs(output_folder, exist_ok=True)
    
    for filename in os.listdir(folder_path):
        if filename.lower().endswith(".svg"):
            svg_path = os.path.join(folder_path, filename)
            png_filename = os.path.splitext(filename)[0] + ".png"
            png_path = os.path.join(output_folder, png_filename)
            try:
                # Build the command for Inkscape:
                # For Inkscape v1.0+ use --export-type=png and --export-filename
                cmd = [
                    "inkscape",
                    svg_path,
                    "--export-type=png",
                    f"--export-filename={png_path}",
                    f"--export-dpi={dpi}"
                ]
                subprocess.run(cmd, check=True)
                print(f"Converted: {filename} -> {png_filename}")
            except Exception as e:
                print(f"Error converting {filename}: {e}")

if __name__ == '__main__':
    # Specify the folder containing the SVG files (adjust the path as needed)
    folder = "./icons"
    convert_svgs_to_pngs(folder)
